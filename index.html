<!DOCTYPE html>
<html>
  <head>
    <title>Boston House Pricing Map</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <link rel="stylesheet" href="https://www.unpkg.com/tailwindcss@2.1.4/dist/tailwind.min.css" integrity="sha512-2x3sObNVbtxF++/xI9Rj0kqptCr1uNghrcoSzzVnWIkN4OBpP3NqBLR3+ezvzAVOtGKaWiy//TkdDF+SWseCSA==" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.23.0/themes/prism.css" integrity="sha512-jtWR3pdYjGwfw9df601YF6uGrKdhXV37c+/6VNzNctmrXoO0nkgHcS03BFxfkWycOa2P2Nw9Y9PCT9vjG9jkVg==" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="https://unpkg.com/prismjs@1.23.0/prism.js" integrity="sha512-S2+nGI85suJO7CXXZDiu8ygn+SOGUddvdqa2qu04j2D11jSOjWw8sA9n7EDX95J6aZnQImsqDuO/ItqCrwWDCg==" crossorigin=""></script>
    <script src="static/heatmap.min.js"></script>
    <script src="static/leaflet-heatmap.js"></script>
  </head>

  <body>
    <main class="my-10 lg:my-14 xl:my-16 max-w-6xl mx-auto px-4 sm:px-6">
      <h1 class="text-3xl tracking-tight leading-tight font-extrabold text-gray-900 sm:text-4xl lg:text-5xl mb-8">Boston Housing Pricing Characteristics Map</h1>

      <p class="font-medium my-6 text-xl text-gray-700">
        Property characteristics that influence the sale price of the Boston Housing.
      </p>

      
      <div id="mapid" style="width: 100%; height: 600px; max-height: 90vh"></div>

     

    <footer>
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="md:flex md:items-center md:justify-between py-4 md:py-8 border-t border-gray-200">
          <div class="text-sm text-gray-600 mr-4">MIT Visualization and Society, Spring 2024</div>
        </div>
      </div>
    </footer>

    <!-- Change your Google API Key here, this is the one we provide for testing. Please do not overuse it -->
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxEA9aqIp7wWJHw85E7N0XnCwc3RAQOYE&libraries=visualization&callback=initMap"></script>

    <script>
      var dataConfig = {
        latitudeField: 'latitude',
        longitudeField: 'longitude',
        valueField: 'pricePerArea',
      };

      function initMap() {
        if (!window.dataConfig || !Array.isArray(dataConfig.dataset)) {
          console.error('Please review you data.jsonp file');
          return;
        }

        var bounds = new google.maps.LatLngBounds();
        var heatMapData = [];
        dataConfig.dataset.forEach(item => {
          var latitude = item[dataConfig.latitudeField || 'latitude'];
          var longitude = item[dataConfig.longitudeField || 'longitude'];
          var weight = item[dataConfig.valueField || 'pricePerArea'];

          var location = new google.maps.LatLng(latitude, longitude);
          heatMapData.push({
            location: location,
            weight: weight,
          });
          bounds.extend(location);
        });

        var heatmap = new google.maps.visualization.HeatmapLayer({
          data: heatMapData,
        });
        heatmap.set('radius', 65);

        var center = new google.maps.LatLng(42.285988, -70.142033);
        var map = new google.maps.Map(document.getElementById('mapid'), {
          mapTypeId: 'roadmap',
          minZoom: 12,
          maxZoom: 16,
          zoom: 16,
          center: center,
        });
        map.fitBounds(bounds);
        heatmap.setMap(map);
      }
    </script>
    <script src="data.jsonp"></script>
  </body>
</html>
